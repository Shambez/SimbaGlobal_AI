try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9cb753de-7a7e-4f8c-99c3-079994dfc7c7",e._sentryDebugIdIdentifier="sentry-dbid-9cb753de-7a7e-4f8c-99c3-079994dfc7c7")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92375],{16129:(e,t,r)=>{r.d(t,{Xk:()=>d});var n=r(96427),s=r(903219),a=r(581923),i=r(154431);function o(){let e=(0,n._)(["\n    query SentryProjectByAppIdQuery($appId: String!) {\n  app {\n    byId(appId: $appId) {\n      id\n      sentryProject {\n        ...SentryProjectData\n      }\n    }\n  }\n}\n    ",""]);return o=function(){return e},e}let l={},c=(0,s.J1)(o(),a.P);function d(e){let t={...l,...e};return i.IT(c,t)}},41322:(e,t,r)=>{r.d(t,{N:()=>L});var n=r(637876),s=r(743624),a=r(697342),i=r(14232),o=r(277503),l=r(424771),c=r(158264),d=r(16129),u=r(953885),h=r(353806),x=r(285746),p=r(197093),y=r(6735),m=r(766028),j=r(121182),f=r(361268),g=r(523805),w=r(549024),S=r(703989),v=r(888299),I=r(648638),N=r(976453);function P(e){var t,r,s,i,o,l,c,d,u,h,x,p,y;let{replay:P,replayUrl:E}=e,b=null!=(u=null!=(d=null!=(c=null==(t=P.user)?void 0:t.display_name)?c:null==(r=P.user)?void 0:r.username)?d:null==(s=P.user)?void 0:s.id)?u:"Unknown",_=null!=(h=P.finished_at)?h:P.started_at;return(0,n.jsxs)(v.H,{children:[(0,n.jsx)(I.y,{}),(0,n.jsx)(m.Link,{href:E,openInNewTab:!0,children:(0,n.jsxs)(g.n,{theme:"interactive",className:"flex items-center justify-between gap-2 pl-5",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"flex items-center gap-1 text-xs text-default",children:b}),(0,n.jsxs)("div",{className:"flex items-center",children:[_&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-2xs text-secondary",children:(0,f.$)(_)}),(0,n.jsx)("p",{className:"text-2xs text-quaternary",children:" • "})]}),(0,n.jsx)("p",{className:"text-2xs text-secondary",children:P.id.slice(0,8)})]})]}),(0,n.jsx)(a.ArrowUpRightIcon,{className:"icon-sm text-icon-secondary"})]})}),(0,n.jsx)(g.n,{children:(0,n.jsx)(w.k,{className:"whitespace-nowrap",children:null!=(x=null==(i=P.os)?void 0:i.name)?x:null==(o=P.browser)?void 0:o.name})}),(0,n.jsx)(g.n,{children:(0,n.jsx)(w.k,{className:"whitespace-nowrap",children:(0,j.a3)((null!=(p=P.duration)?p:0)*1e3)})}),(0,n.jsx)(g.n,{children:P.count_errors&&P.count_errors>0?(0,n.jsx)(N.v,{size:"xs",title:null==(l=P.count_errors)?void 0:l.toString(),theme:"red"}):(0,n.jsx)(S.b,{})}),(0,n.jsx)(g.n,{children:(0,n.jsx)(k,{activityLevel:null!=(y=P.activity)?y:0})})]})}function k(e){let{activityLevel:t}=e;return(0,n.jsx)("div",{className:"flex gap-1",children:Array.from(Array(10)).map((e,r)=>(0,n.jsx)("div",{className:(0,m.mergeClasses)("h-5 w-1",r<t?"bg-app-purple":"bg-palette-gray6")},r))})}var E=r(909275),b=r(254218),_=r(141278),T=r(49355),A=r(395661);function R(e){let{children:t}=e;return(0,n.jsxs)(A.j,{theme:"unstyled",columnCount:5,gridTemplateColumns:["auto",{min:"min-content",max:"12%"},{min:"min-content",max:"12%"},{min:"min-content",max:"12%"},{min:"min-content",max:"12%"}],children:[(0,n.jsxs)(b.A,{theme:"secondary",children:[(0,n.jsx)(_.M,{className:"pl-6",children:(0,n.jsx)(T.z,{children:"Replay"})}),(0,n.jsx)(_.M,{children:(0,n.jsx)(T.z,{children:"OS"})}),(0,n.jsx)(_.M,{children:(0,n.jsx)(T.z,{children:"Duration"})}),(0,n.jsx)(_.M,{children:(0,n.jsx)(T.z,{children:"Errors"})}),(0,n.jsxs)(_.M,{children:[(0,n.jsx)(T.z,{children:"Activity"}),(0,n.jsx)(E.t,{contentClassName:"text-2xs",children:U})]})]}),t]})}let U="Activity represents how much user activity happened in a replay. It is determined by the number of errors encountered, duration, and UI events.";function z(e){let{isLoading:t,error:r,replays:s,sentryOrgSlug:a,noReplaysMessage:i}=e;return t?(0,n.jsx)(y.O,{inline:!0,loading:!0}):!s.length&&r?(0,n.jsx)(y.O,{inline:!0,description:"There was an error loading Sentry data. Try refreshing the page.",buttonText:"Reload",error:r,onClick:()=>{window.location.reload()}}):s.length?(0,n.jsx)(R,{children:s.map(e=>(0,n.jsx)(P,{replay:e,replayUrl:"https://".concat(a,".sentry.io/replays/").concat(e.id)},e.id))}):(0,n.jsx)(y.O,{inline:!0,title:"No Sentry data",description:i})}function L(e){var t;let{accountId:r,appId:y,noReplaysMessage:m,filterCriteria:j}=e,{data:f,loading:g,error:w}=(0,d.Xk)({skip:!y,variables:{appId:y}}),S=null==f||null==(t=f.app.byId.sentryProject)?void 0:t.sentryProjectId,{replays:v,error:I,isLoading:N,externalUrl:P,sentryOrgSlug:k}=function(e){let{skipInitialLoad:t=!1,accountId:r,sentryProjectId:n,filterCriteria:s,queryOptions:a}=e,[d,u]=(0,i.useState)([]),[h,x]=(0,i.useState)(),[p,y]=(0,i.useState)(),[m,j]=(0,i.useState)(),[f,g]=(0,i.useState)(!t),[w]=(0,c.k)({variables:{accountId:r}}),S=(0,i.useRef)(!0),v=(0,o.n)(s);async function I(){if(!n||!v)return!1;j(void 0),g(!0);try{let{data:e}=await w(),t=null==e?void 0:e.sentryInstallation.generateSentryToken;if(!(null==t?void 0:t.orgSlug)||!(null==t?void 0:t.token))throw Error("Unable to retrieve Sentry project data");let r=t.token,i=t.orgSlug,c=new URL("https://".concat(i,".sentry.io/replays/"));c.searchParams.append("project",n),c.searchParams.append("statsPeriod",a.statsPeriod);let d=(0,o.e)(s);d.length>13&&c.searchParams.append("query",d),x(c.toString()),y(i);let h=await (0,l.eU)(r,i,n,s,a);return u(h.slice(0,10)),!0}catch(e){j(e instanceof Error?e:Error("Failed to retrieve Sentry replays"))}finally{g(!1)}return!1}return(0,i.useEffect)(function(){n&&v&&(t&&S.current||I(),S.current=!1)},[t,n,s]),{replays:d,error:m,isLoading:f,externalUrl:h,sentryOrgSlug:p}}({accountId:r,sentryProjectId:S,filterCriteria:j,queryOptions:{statsPeriod:"14d"}});return S&&k?(0,n.jsxs)(x.h,{children:[(0,n.jsx)(u.s,{size:"header",withDivider:!0,children:(0,n.jsx)(h.N,{title:"Sentry replays",size:"sm",icon:(0,n.jsx)(s.SentryIcon,{}),rightSlot:(0,n.jsx)(p.$,{theme:"secondary",size:"xs",href:P,rightSlot:(0,n.jsx)(a.ArrowUpRightIcon,{}),openInNewTab:!0,disabled:!P,children:"View on Sentry"})})}),(0,n.jsx)(z,{isLoading:g||N,error:null!=w?w:I,replays:v,sentryOrgSlug:k,noReplaysMessage:m})]}):null}},158264:(e,t,r)=>{r.d(t,{k:()=>c});var n=r(96427),s=r(903219),a=r(764177);function i(){let e=(0,n._)(["\n    mutation GenerateSentryToken($accountId: ID!) {\n  sentryInstallation {\n    generateSentryToken(accountId: $accountId) {\n      orgSlug\n      installationId\n      token\n    }\n  }\n}\n    "]);return i=function(){return e},e}let o={},l=(0,s.J1)(i());function c(e){let t={...o,...e};return a.n(l,t)}},277503:(e,t,r)=>{r.d(t,{e:()=>s,n:()=>a});var n=r(55033);function s(e){var t,r;return e?"".concat((null==(t=e.UPDATE_ID)?void 0:t.length)?"ota_updates.update_id:[".concat(e.UPDATE_ID.join(", "),"]"):""," ").concat((null==(r=e.RUNTIME_VERSION)?void 0:r.length)?"ota_updates.runtime_version:[".concat(e.RUNTIME_VERSION.join(", "),"]"):""," ").concat(e.CHANNEL?"ota_updates.channel:".concat(e.CHANNEL):""," ").concat(e.NATIVE_VERSION?"release:*".concat(e.NATIVE_VERSION,"*"):"").trim():""}function a(e){return!!e&&((0,n.z2)(e.UPDATE_ID)||(0,n.z2)(e.RUNTIME_VERSION)||(0,n.z2)(e.CHANNEL)||(0,n.z2)(e.NATIVE_VERSION))}},357140:(e,t,r)=>{r.d(t,{v:()=>T});var n=r(637876),s=r(743624),a=r(697342),i=r(14232),o=r(277503),l=r(424771),c=r(158264),d=r(16129),u=r(953885),h=r(353806),x=r(285746),p=r(197093),y=r(6735),m=r(766028),j=r(598861),f=r(361268),g=r(523805),w=r(549024),S=r(888299),v=r(648638);function I(e){let{issue:t,eventUrl:r}=e;return(0,n.jsxs)(S.H,{children:[(0,n.jsx)(v.y,{}),(0,n.jsx)(m.Link,{href:r,openInNewTab:!0,children:(0,n.jsxs)(g.n,{theme:"interactive",className:"flex min-h-[50px] items-center justify-between gap-2 pl-5",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(w.k,{children:t.title}),(0,n.jsx)("code",{className:"text-3xs text-secondary",children:t.culprit})]}),(0,n.jsx)(a.ArrowUpRightIcon,{className:"icon-sm text-icon-secondary"})]})}),(0,n.jsx)(g.n,{children:(0,n.jsx)(w.k,{className:"whitespace-nowrap",children:t.count})}),(0,n.jsx)(g.n,{children:(0,n.jsx)(w.k,{className:"whitespace-nowrap",children:t.userCount})}),(0,n.jsx)(g.n,{children:(0,n.jsx)(w.k,{children:(0,f.$)(t.firstSeen,j.WL.timestamp)})}),(0,n.jsx)(g.n,{children:(0,n.jsx)(w.k,{children:(0,f.$)(t.lastSeen,j.WL.timestamp)})})]})}var N=r(254218),P=r(141278),k=r(49355),E=r(395661);function b(e){let{children:t}=e;return(0,n.jsxs)(E.j,{theme:"unstyled",columnCount:5,gridTemplateColumns:["1fr",{min:"min-content",max:"auto"},{min:"min-content",max:"auto"},{min:"150px",max:"auto"},{min:"150px",max:"auto"}],children:[(0,n.jsxs)(N.A,{theme:"secondary",children:[(0,n.jsx)(P.M,{className:"pl-6",children:(0,n.jsx)(k.z,{children:"Issue"})}),(0,n.jsx)(P.M,{children:(0,n.jsx)(k.z,{children:"Events"})}),(0,n.jsx)(P.M,{children:(0,n.jsx)(k.z,{children:"Users"})}),(0,n.jsx)(P.M,{children:(0,n.jsx)(k.z,{children:"First seen"})}),(0,n.jsx)(P.M,{children:(0,n.jsx)(k.z,{children:"Last seen"})})]}),t]})}function _(e){let{isLoading:t,error:r,issues:s,sentryOrgSlug:a,noErrorsMessage:i}=e;return t?(0,n.jsx)(y.O,{inline:!0,loading:!0}):!s.length&&r?(console.error(r),(0,n.jsx)(y.O,{inline:!0,description:"There was an error loading Sentry data. Try refreshing the page.",buttonText:"Reload",error:r,onClick:()=>{window.location.reload()}})):s.length?(0,n.jsx)(b,{children:s.map(e=>(0,n.jsx)(I,{issue:e,eventUrl:"https://".concat(a,".sentry.io/issues/").concat(e.id)},e.id))}):(0,n.jsx)(y.O,{inline:!0,title:"No Sentry data",description:i})}function T(e){var t;let{accountId:r,appId:y,noErrorsMessage:m,filterCriteria:j}=e,{data:f,loading:g,error:w}=(0,d.Xk)({skip:!y,variables:{appId:y}}),S=null==f||null==(t=f.app.byId.sentryProject)?void 0:t.sentryProjectId,{issues:v,error:I,isLoading:N,externalUrl:P,sentryOrgSlug:k}=function(e){let{skipInitialLoad:t=!1,accountId:r,sentryProjectId:n,filterCriteria:s}=e,[a,d]=(0,i.useState)(),[u,h]=(0,i.useState)([]),[x,p]=(0,i.useState)(),[y,m]=(0,i.useState)(),[j,f]=(0,i.useState)(!t),[g]=(0,c.k)({variables:{accountId:r}}),w=(0,i.useRef)(!0),S=(0,o.n)(s);async function v(){if(!n||!S)return!1;m(void 0),f(!0);try{let{data:e}=await g(),t=null==e?void 0:e.sentryInstallation.generateSentryToken;if(!(null==t?void 0:t.orgSlug)||!(null==t?void 0:t.token))throw Error("Unable to retrieve Sentry project data");let r=t.token,a=t.orgSlug,i=new URL("https://".concat(a,".sentry.io/issues/"));i.searchParams.append("project",n),i.searchParams.append("referrer","issue-list"),i.searchParams.append("statsPeriod","14d");let c=(0,o.e)(s);c.length&&i.searchParams.append("query",c),d(i.toString()),p(a);let{issues:u}=await (0,l.yA)(r,a,n,s,{statsPeriod:"14d",cursor:void 0});return h(u.slice(0,10)),!0}catch(e){console.error(e),m(e instanceof Error?e:Error("Failed to retrieve Sentry issues"))}finally{f(!1)}return!1}return(0,i.useEffect)(function(){n&&S&&(t&&w.current||v(),w.current=!1)},[t,n,s]),{issues:u,error:y,isLoading:j,externalUrl:a,sentryOrgSlug:x}}({accountId:r,sentryProjectId:S,filterCriteria:j});return S&&k?(0,n.jsxs)(x.h,{children:[(0,n.jsx)(u.s,{size:"header",withDivider:!0,children:(0,n.jsx)(h.N,{title:"Sentry issues",size:"sm",icon:(0,n.jsx)(s.SentryIcon,{}),rightSlot:(0,n.jsx)(p.$,{theme:"secondary",size:"xs",href:P,rightSlot:(0,n.jsx)(a.ArrowUpRightIcon,{}),openInNewTab:!0,disabled:!P,children:"View on Sentry"})})}),(0,n.jsx)(_,{isLoading:g||N,error:null!=w?w:I,issues:v,sentryOrgSlug:k,noErrorsMessage:m})]}):null}},424771:(e,t,r)=>{r.d(t,{Kf:()=>s,eU:()=>a,yA:()=>i});var n=r(277503);async function s(e,t){try{let r=new URL("/api/sentry/projects",window.location.origin);r.searchParams.set("token",e),r.searchParams.set("orgSlug",t);let n=await fetch(r);if(!n.ok)throw Error("Failed to get Sentry projects");return(await n.json()).projects.sort((e,t)=>e.isBookmarked!==t.isBookmarked?e.isBookmarked?-1:1:e.name.localeCompare(t.name))}catch(e){throw Error("Failed to get Sentry projects")}}async function a(e,t,r,s,a){let{statsPeriod:i}=a;try{let a=new URL("/api/sentry/replays",window.location.origin);a.searchParams.set("token",e),a.searchParams.set("orgSlug",t),a.searchParams.set("projectId",r),a.searchParams.set("statsPeriod",i),a.searchParams.set("sort","-finished_at"),a.searchParams.set("per_page","100");let o=(0,n.e)(s);o&&a.searchParams.set("query",o);let l=await fetch(a);if(!l.ok){let e=await l.text();throw console.error("Sentry API Error (".concat(l.status,"): ").concat(e)),Error("Failed to retrieve Sentry replays. Status: ".concat(l.status))}return(await l.json()).replays}catch(e){throw e instanceof Error&&e.message.startsWith("Failed to retrieve Sentry replays")||console.error(e),Error("Failed to retrieve Sentry replays")}}async function i(e,t,r,s,a){let{statsPeriod:i,cursor:o}=a;try{let a=new URL("/api/sentry/issues",window.location.origin);a.searchParams.set("token",e),a.searchParams.set("orgSlug",t),a.searchParams.set("projectId",r),i&&a.searchParams.set("statsPeriod",i),o&&a.searchParams.set("cursor",o);let l=(0,n.e)(s);l&&a.searchParams.set("query",l);let c=await fetch(a);if(!c.ok){let e=await c.text();throw console.error("Sentry API Error (".concat(c.status,"): ").concat(e)),Error("Failed to retrieve Sentry issues. Status: ".concat(c.status))}return await c.json()}catch(e){throw e instanceof Error&&e.message.startsWith("Failed to retrieve Sentry issues")||console.error(e),Error("Failed to retrieve Sentry issues")}}},581923:(e,t,r)=>{r.d(t,{P:()=>a});var n=r(96427);function s(){let e=(0,n._)(["\n    fragment SentryProjectData on SentryProject {\n  id\n  sentryProjectSlug\n  sentryProjectId\n  sentryInstallationId\n}\n    "]);return s=function(){return e},e}let a=(0,r(903219).J1)(s())},592225:(e,t,r)=>{r.d(t,{L:()=>c});var n=r(637876),s=r(58532),a=r(14232),i=r(598861),o=r(408557),l=r(523805);function c(e){let{date:t,dateFormat:r=i.WL.timestamp,loaderWidth:c=148,...d}=e,[u,h]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{h(!0)},[]),(0,n.jsx)(l.n,{...d,children:(0,n.jsx)(o.c,{loading:!u,height:24,width:c,children:(0,n.jsx)("time",{className:"whitespace-nowrap text-xs",children:(0,s.GP)(t,r)})})})}}}]);